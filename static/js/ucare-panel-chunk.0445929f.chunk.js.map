{"version":3,"sources":["../node_modules/@uploadcare/react-widget/dist/esm/dialog-98ec5e8a.js"],"names":["__webpack_require__","r","__webpack_exports__","_index_ded791f3_js__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_1___default","n","uploadcare_widget__WEBPACK_IMPORTED_MODULE_2__","uploadcare_widget__WEBPACK_IMPORTED_MODULE_2___default","_use_deep_effect_393663e2_js__WEBPACK_IMPORTED_MODULE_3__","merge","state","newState","Object","containerStyles","height","display","flexDirection","alignItems","justifyContent","Progress","_ref","hidden","value","ref","renderer","current","a","Circle","setValue","createElement","useDialog","props","uploadcare","initial","_useState","opened","file","progress","_useState2","setState","customTabs","tabsCss","locale","localePluralize","localeTranslations","window","UPLOADCARE_LOCALE","UPLOADCARE_LOCALE_PLURALIZE","UPLOADCARE_LOCALE_TRANSLATIONS","panelContainer","panelInstance","indexOf","addUrl","addStyle","reject","openPanel","fileFrom","uuid","done","_useDialog","_useDialog2","_useDialog2$","containerRef","readyState","progressState","id","style","className","onClick","sourse"],"mappings":"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","file":"static/js/ucare-panel-chunk.0445929f.chunk.js","sourcesContent":["import { c as _objectSpread2, b as _slicedToArray } from './index-ded791f3.js';\nimport React, { useReducer, useRef, useEffect } from 'react';\nimport uploadcare from 'uploadcare-widget';\nimport { a as useDeepEffect, u as useCustomTabs } from './use-deep-effect-393663e2.js';\nimport 'react-fast-compare';\nimport '@uploadcare/client-suspense';\n\nvar merge = function merge(state, newState) {\n  return _objectSpread2(_objectSpread2({}, state), newState);\n};\n\nvar useState = function useState(initial) {\n  return useReducer(merge, initial || {});\n};\n\nvar containerStyles = {\n  height: '500px',\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center'\n};\n\nvar Progress = function Progress(_ref) {\n  var hidden = _ref.hidden,\n      value = _ref.value;\n  var ref = useRef(null);\n  var renderer = useRef(null);\n  useEffect(function () {\n    renderer.current = new uploadcare.Circle(ref.current).renderer;\n  }, []);\n  useEffect(function () {\n    renderer.current.setValue(value);\n  }, [value]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    hidden: hidden,\n    ref: ref\n  });\n};\n\nvar useDialog = function useDialog(props, uploadcare) {\n  var _useState = useState({\n    opened: true,\n    file: null,\n    progress: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var customTabs = props.customTabs,\n      tabsCss = props.tabsCss,\n      locale = props.locale,\n      localePluralize = props.localePluralize,\n      localeTranslations = props.localeTranslations;\n  useDeepEffect(function () {\n    if (locale) window.UPLOADCARE_LOCALE = locale;\n    if (localePluralize) window.UPLOADCARE_LOCALE_PLURALIZE = localePluralize;\n\n    if (localeTranslations) {\n      window.UPLOADCARE_LOCALE_TRANSLATIONS = localeTranslations;\n    }\n\n    return function () {\n      if (locale) delete window.UPLOADCARE_LOCALE;\n      if (localePluralize) delete window.UPLOADCARE_LOCALE_PLURALIZE;\n      if (localeTranslations) delete window.UPLOADCARE_LOCALE_TRANSLATIONS;\n    };\n  }, [locale, localePluralize, localeTranslations]);\n  useCustomTabs(customTabs, uploadcare);\n  var panelContainer = useRef(null);\n  var panelInstance = useRef(null);\n  useEffect(function () {\n    if (state.opened) {\n      if (uploadcare && tabsCss && typeof tabsCss === 'string') {\n        if (tabsCss.indexOf('https://') === 0) {\n          uploadcare.tabsCss.addUrl(tabsCss);\n        } else {\n          uploadcare.tabsCss.addStyle(tabsCss);\n        }\n      }\n\n      panelInstance.current && panelInstance.current.reject();\n      panelInstance.current = uploadcare.openPanel(panelContainer.current, state.file ? uploadcare.fileFrom('uploaded', state.file.uuid, props) : null, props);\n      setState({\n        file: null\n      });\n      panelInstance.current.done(function (file) {\n        setState({\n          opened: false\n        });\n        file.progress(function (state) {\n          return setState({\n            progress: state.progress\n          });\n        });\n        file.done(function (file) {\n          return setState({\n            file: file\n          });\n        });\n      });\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [uploadcare, props, setState, state.opened]);\n  useEffect(function () {\n    return function () {\n      return panelInstance.current && panelInstance.current.reject();\n    };\n  }, []);\n  return [state, setState, panelContainer];\n};\n\nvar Dialog = function Dialog(props) {\n  var _useDialog = useDialog(props, uploadcare),\n      _useDialog2 = _slicedToArray(_useDialog, 3),\n      _useDialog2$ = _useDialog2[0],\n      opened = _useDialog2$.opened,\n      file = _useDialog2$.file,\n      progress = _useDialog2$.progress,\n      setState = _useDialog2[1],\n      containerRef = _useDialog2[2];\n\n  var readyState = file && !opened;\n  var progressState = !file && !opened && progress !== null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: props.id,\n    style: containerStyles\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    hidden: !readyState\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"uploadcare--button uploadcare--button_primary\",\n    onClick: function onClick() {\n      return setState({\n        opened: true,\n        sourse: 'natural'\n      });\n    }\n  }, \"Open panel\")), /*#__PURE__*/React.createElement(\"span\", {\n    hidden: !readyState\n  }, \"File uuid: \"), /*#__PURE__*/React.createElement(\"span\", {\n    hidden: !readyState\n  }, file && file.uuid), /*#__PURE__*/React.createElement(Progress, {\n    hidden: !progressState,\n    value: progress\n  }));\n};\n\nexport default Dialog;"],"sourceRoot":""}